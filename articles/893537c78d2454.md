---
title: "„ÄêUnity„ÄëGameCI„Å´Unity„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÇíÈÅ©Âøú„Åï„Åõ„Å¶„Åø„Åü"
emoji: "üêï"
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics: ["Unity", "GameCI", "GitHub Actions"]
published: true
publication_name: midra_lab
---

## „ÅØ„Åò„ÇÅ„Å´
‰ªäÂõû„ÅØ„Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Éû„Çπ„Ç≥„ÉÉ„Éà„Å®Âëº„Å∞„Çå„ÇãOSS„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÈñãÁô∫ÈÅéÁ®ã„ÅßÁô∫Ë¶ã„Åó„ÅüÁâ©„Å´„Å™„Çä„Åæ„Åô„ÄÇ

https://github.com/MidraLab/uDesktopMascot

GameCI„ÅØ„Éá„Éï„Ç©„É´„Éà„ÅÆË®≠ÂÆö„Åß„ÅØUnity„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÇíËá™Âãï„Åß0.0.0„Åã„Çâ„Éì„É´„Éâ„Åô„Çã„Åî„Å®„Å´„Ç§„É≥„ÇØ„É™„É°„É≥„Éà„Åó„Å¶„Åè„Çå„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

„Åó„Åã„Åó„ÄÅ„Éê„Éº„Ç∏„Éß„É≥„ÇíCI„Çà„ÇäUnityÊú¨„Éó„É≠„Ç∏„Çß„ÇØ„Éà‰∏ªÂ∞é„ÅßÁÆ°ÁêÜ„Åó„Åü„Å®ÊÄù„Å£„Åü„ÅÆ„ÅßË™ø„Åπ„Åæ„Åó„Åü„ÄÇ

## ÂèÇËÄÉ„Å´„Å™„Å£„Åü„É™„É≥„ÇØ

https://game.ci/docs/github/builder/#versioning

https://discord.com/channels/710946343828455455/1299384839539003432/1303679852531941471

## „ÇÑ„Å£„Å¶„Åø„Çã
### Unity„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÇíÂèñÂæó„Åô„Çã
„Éê„Éº„Ç∏„Éß„É≥„ÇíÂèñÂæó„Åô„Çã„Éñ„É©„É≥„ÉÅ„Åß„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åã„Çâ„Éê„Éº„Ç∏„Éß„É≥„ÇíÊäΩÂá∫„Åóoutput„Å´Âá∫Âäõ„Åó„Åæ„Åô„ÄÇ
```
jobs:
  check-branch:
    runs-on: ubuntu-latest
    outputs:
      current_version: ${{ steps.check_branch.outputs.current_version }}
    steps:
      - uses: actions/checkout@v4.2.2
        with:
          fetch-depth: 0  # „Åô„Åπ„Å¶„ÅÆÂ±•Ê≠¥„Å®„Çø„Ç∞„ÇíÂèñÂæó

      - name: Check event type and branch
        id: check_branch
        run: |
          # ProjectSettings.asset„Åã„ÇâÁèæÂú®„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÇíÂèñÂæó
          current_version=$(grep -m1 'bundleVersion:' ProjectSettings/ProjectSettings.asset | awk '{print $2}')
          echo "current_version=${current_version}" >> $GITHUB_OUTPUT
```

ProjectSettings.asset„ÅÆ‰∏≠Ë∫´„Å´„ÅÇ„ÇãbundleVersion„ÇíÂèñÂæó„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
```
  ...
  tvOSBundleVersion: 1.0
  bundleVersion: 0.1.0
  preloadedAssets:
  ...
```

output„Å´Âá∫Âäõ
```
  current_version=$(grep -m1 'bundleVersion:' ProjectSettings/ProjectSettings.asset | awk '{print $2}')
```

### „Éê„Éº„Ç∏„Éß„É≥„ÇíÈÅ©Âøú„Åï„Åõ„Çã
needs„Åßcheck-branch„Ç∏„Éß„Éñ„ÅÆoutput„ÇíÂèÇÁÖß„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„ÄÅGameCI„Çπ„ÉÜ„ÉÉ„Éó„ÅÆoption„Åßversion„ÇíÊåáÂÆö„Åó„Åæ„Åô„ÄÇ
```
build-windows:
    needs: [check-branch]
    runs-on: windows-latest
    steps:
      - name: Check out my unity project.
        uses: actions/checkout@v4.2.2

      - name: Create LFS file list
        run: git lfs ls-files -l | cut -d' ' -f1 | sort > .lfs-assets-id

      - name: Restore LFS cache
        uses: actions/cache@v4.2.0
        id: lfs-cache
        with:
          path: .git/lfs
          key: ${{ runner.os }}-lfs-${{ hashFiles('.lfs-assets-id') }}

      - name: Git LFS Pull
        run: |
          git lfs pull
          git add .
          git reset --hard

      - uses: actions/cache@v4.2.0
        with:
          path: Library
          key: Library-${{ hashFiles('Assets/**', 'Packages/**', 'ProjectSettings/**') }}
          restore-keys: |
            Library-

      - name: Run the build for StandaloneWindows64
        uses: game-ci/unity-builder@v4.3.0
        env:
          UNITY_EMAIL: ${{ secrets.UNITY_EMAIL }}
          UNITY_PASSWORD: ${{ secrets.UNITY_PASSWORD }}
          UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}
        with:
          targetPlatform: StandaloneWindows64
          unityVersion: '6000.0.31f1'
          buildName: 'uDesktopMascot'
          versioning: Custom
          version: ${{ needs.check-branch.outputs.current_version }}
```

versioning„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„ÇíCustom„Å´„Åô„Çã„Åì„Å®„Åß„ÄÅversion„Çí„Ç´„Çπ„Çø„É†„ÅßÊåáÂÆö„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ
```
- name: Run the build for StandaloneWindows64
        uses: game-ci/unity-builder@v4.3.0
        env:
          UNITY_EMAIL: ${{ secrets.UNITY_EMAIL }}
          UNITY_PASSWORD: ${{ secrets.UNITY_PASSWORD }}
          UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}
        with:
          targetPlatform: StandaloneWindows64
          unityVersion: '6000.0.31f1'
          buildName: 'uDesktopMascot'
          versioning: Custom <--- „Åì„Åì„Åß„Ç´„Çπ„Çø„É†„Å™„Éê„Éº„Ç∏„Éß„É≥„ÇíÊåáÂÆö„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åô„Çã
          version: ${{ needs.check-branch.outputs.current_version }} <--- „Åì„Åì„Åß„Éê„Éº„Ç∏„Éß„É≥„ÇíÊåáÂÆö„Åô„Çã
```

## „Åä„Çè„Çä„Å´

Discord„Å´ÁµêÊßãÊúâÁõä„Å™ÊÉÖÂ†±„Åå„ÅÇ„Çã„ÅÆ„Åß„ÄÅ„Çà„ÅèË¶ã„Çã„Å®„ÅÑ„ÅÑ„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ

https://discord.com/invite/WyPN5r9